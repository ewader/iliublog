<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>群晖 on 图南博客</title>
    <link>https://iliu.org/tags/%E7%BE%A4%E6%99%96/</link>
    <description>Recent content in 群晖 on 图南博客</description>
    <image>
      <title>图南博客</title>
      <url>https://iliu.org/papermod-cover.png</url>
      <link>https://iliu.org/papermod-cover.png</link>
    </image>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sun, 12 Nov 2023 17:23:22 +0800</lastBuildDate><atom:link href="https://iliu.org/tags/%E7%BE%A4%E6%99%96/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>在群晖中使用tailscale实现内网穿透</title>
      <link>https://iliu.org/Using-tailscale-to-achieve-intranet-penetration-in-Synology/</link>
      <pubDate>Sun, 12 Nov 2023 17:23:22 +0800</pubDate>
      
      <guid>https://iliu.org/Using-tailscale-to-achieve-intranet-penetration-in-Synology/</guid>
      <description>在远程连接群晖的实践中，老刘一切介绍过zerotier和IPv6。但是实际的使用过程中，zerotier有时候握手的速度很慢，而且配置起来比较麻烦，IPv6很好，速度也快，但是有些环境中还只有IPv4，直到我听别人介绍到tailscale这个软件。它的工作原理其实和zerotier差不多，但是不需要什么复杂的设置，直接注册、登录，同一个账号的所有设备都连接到一起了。
注册tailscale 百度直接搜，或者打看tailscale官方网站。注册就行，不过它不支持自由注册，需要用Google、apple、或者微软的outlook账号注册。
下载tailscale 网页的右上角，有个downloads，点击就可以了。里面有常用的Windows、Linux等的客户端，直接点击下载相应的客户端，并安装。安装后登录，然后在个人中心里，系统自动给你分配了一个ip地址，如果你要了解某个设备，直接在浏览器里打开那个ip地址就好了。
如果你的系统没有在常用的客户端页面，可以点击这里，会进入一个所有的客户端的页面，找到你的系统下载即可。
群晖中安装 点击我上面说的那个连接，然后找到群晖的客户端。根据你群晖的系统选。如果你群晖是DSM6就选6，DSM7就选7，不要选错了。下载之后进入群晖的后台，进入套件中心，点击手动安装。 安装的时候DSM会有一些权限的提示，选择允许就行了。安装后打开套件，点connect那个黑色的按钮，登录你的账号就可以了。
Linux里安装与使用 也是选择合适系统的客户端，下载安装，如果你用的Arch Linux系列，可以直接用命令安装：
yay tailscale 安装完之后，和windows下不同的是，它没有一个UI，需要你在命令里进行登录。 首先，运行tailscale：
sudo systemctl start tailscaled 然后登录：
sudo tailscale login 会给你网址，点击这个网址，用你的账号登录即可。
登录后使用命令查看目前在线的设备：
tailscale status 找到群晖的ip地址，选中复制，粘贴到浏览器里，打开，是不是熟悉的群晖后台出现了？
后续的一些优化 如果是你经常用的设备，你不想让这个设备的ip地址发生变化，可以进行一点小小的设置，如下图： 但让，tailscale还有一些高级的用法，比如在路由器里安装后，其他设备不用安装也能相互访问，这个有点折腾了，不在本文的范围，有兴趣的朋友可以去官方看相关教程。</description>
    </item>
    
    <item>
      <title>思源笔记群晖正确的部署方法</title>
      <link>https://iliu.org/4418.html</link>
      <pubDate>Sat, 01 Jul 2023 05:08:24 +0000</pubDate>
      
      <guid>https://iliu.org/4418.html</guid>
      <description>最近一直在选择一款适合自己的笔记软件，最后确定在思源笔记和 Joplin 这两个上面，打算都长期试用一下，比较一下哪个更适合自己。
事情的起因 思源笔记的升级是相当频繁，可是我却发现，每次 docker 升级后，数据都没有保存下来，只能从备份的数据里重新导入，找了一下原因，发现是映射的文件夹里面没有数据，于是就重新安装，发现按照网上的教程，安装后 跑不起来。经过一番摸索，总算是搞定了！
成功部署的方法 关于如何在群晖上设置Docker等基础的教程，老刘就不再重复制造数据垃圾了，既然你能找到我这里，说明你也已经查了很多的资料了，部署的方法都大同小异，只需要注意以下两点就可以了。
经过博友@老麦的反馈，直接在Container Manager上操作的话，第一步可以不做，直接用第二步即可。详细看下面老麦的评论。
第一，在运行命令那处填写：​ &amp;lt;s&gt;-workspace /siyuan/workspace/&amp;lt;/s&gt; 经过老刘的测试，最新版的思源，只能用上面的这句命令，用别的任何命令，群晖的Docker都会重复重启。​ 第二，储存空间设置 {#第二储存空间设置} &amp;lt;span class=&#34;hljs-regexp&#34;&gt;/Home/&amp;lt;/span&gt;siyuan 以前的教程都是把群晖本地的文件夹映射到Docker的siyuan目录，现在看了是不正确的，这个目录如果填写不正确，思源的Docker可以正常启动，但是升级后，数据都会全部删除，因为没有正确的映射到本地文件夹。
这样就可以运行起来了。</description>
    </item>
    
    <item>
      <title>浅谈群晖安全性方面的设置</title>
      <link>https://iliu.org/4375.html</link>
      <pubDate>Mon, 15 May 2023 07:11:31 +0000</pubDate>
      
      <guid>https://iliu.org/4375.html</guid>
      <description>我们在玩群晖的时候，往往不会满足于群晖只作为局域网里的一个服务器的存在，还想让它发挥更大的作用，让我们无论身在何地，都可以自由的访问我们群晖里的东西，这就需要我们把群晖暴露在公网之中。
无论你是使用ddns，或者frp、zerotier内网穿透技术，只要是你把群晖暴露在公网上，那就要做好承担被网络上成千上万个扫描器扫描到的风险。扫描到不可怕，重要的扫描到也让它没有办法才行。这样，设置群晖的安全性设置就很必要了。
安全性设置 如下图，该选择打勾的都给他打上。
账户的安全性设置 建议对管理员账户强制开启双重验证，并下载synology secure signin这个app，选择code验证，这个无论手机是否在线，输入synology secure signin生成的code都是可以验证的。登录的时候在经常使用的电脑上点击记住设备，下次登录就不用再输入code了。为了安全，这一点点的不方便还是值得的。
群晖防火墙的设置 开启群晖的防火墙还是很有必要的，开启并编辑规则后，可以把屏蔽国外ip的访问，这样安全性就提高了一大块，毕竟扫描器绝大部分都是国外的ip。
开启防火墙，并启用防火墙通知，这样，有ip被封锁后，群晖会发邮件来提醒你。
具体的规则如下：
上述规则的解读，第一条规则是允许你局域网所在的ip段的访问，包括所有的协议和端口，如果用的有docker的话就加上第二条规则，让docker的ip也能自由的和主机进行通信。第三条是允许国内的ip访问，毕竟你需要在不同的地方来访问你的群晖，这个就不要限制了，第四条是我自己的一台境外的服务器，我用来做frp穿透用，也设置允许了。最后一条是拒绝除了上面的ip之外所有ip的访问。</description>
    </item>
    
    <item>
      <title>群晖安装trilium笔记web端不刷新的处理方法</title>
      <link>https://iliu.org/4154.html</link>
      <pubDate>Sun, 26 Jun 2022 03:50:24 +0000</pubDate>
      
      <guid>https://iliu.org/4154.html</guid>
      <description>最初装上trilium上之后，发现web端新建笔记或者删除笔记等都不会刷新。也和中文博客群里的少君等人讨论过，也没有得出过什么结论，毕竟环境不同嘛，当时貌似也就我一个人遇到了这种情况。后来发现是网络有错误，是websocket链接错误。但是作为小白，也没有解决的办法。
后来张波老师也遇到了，原来用域名反代访问就会出现这个问题。群里的大神给出了NGINX下的解决方案，可是我用的群晖啊，没有nginx肿么办？
其实，用群晖的反代更简单 打开群晖反代的设置界面，点击自定义标题，点新增，点websocket。保存，即可。</description>
    </item>
    
    <item>
      <title>使用群晖自动备份网站</title>
      <link>https://iliu.org/4131.html</link>
      <pubDate>Sat, 28 May 2022 08:23:06 +0000</pubDate>
      
      <guid>https://iliu.org/4131.html</guid>
      <description>不管是做网站也好，写独立博客也好，最重要的事情之一就是备份。几乎每一个站长都经历过一不小心，多年的心血付之东流的经历。不过好在现在备份的方法很多，可以备份到本地，可以备份的腾讯cos，阿里云等等。云储存也不贵，几十块钱甚至十几块可以用一年，唯一的缺点是这些云储存都收取上行流量费。也就是说，一旦你用到你的数据，想把数据下载到本地，是还要付出一些费用的。
折腾群晖的时候，发现群晖的Active Back for Business这个套件可以自动的同步服务器上的文件，非常的方便，于是拿来备份网站，还是非常的方便的。
安装Active Back for Business 群晖套件中心里，找到Active Back for Business，并安装。不多说。
使用Active Back for Business备份网站 一、打开Active Back for Business套件，点击文件服务器。
二、点击添加服务器。这里我们选择rsync服务器。然后下一步。
三、填写服务器信息，并点击完成。
四、选择备份模式，这里老刘选择的是增量备份，也可以选择多版本备份，这样就可以自动备份你设定的几个版本。
五、选择你网站文件所在的文件夹，选择备份时间，即可。
可能会遇到的问题 在填写服务器的时候，可能会提示服务器没有安装rsync，只需在服务器中安装这个服务即可。
#Debian或者Ubuntu apt install rsync CentOs yum install rsync</description>
    </item>
    
    <item>
      <title>没有公网IP也能玩转群晖DDNS</title>
      <link>https://iliu.org/3997.html</link>
      <pubDate>Thu, 30 Dec 2021 02:47:58 +0000</pubDate>
      
      <guid>https://iliu.org/3997.html</guid>
      <description>我们知道，玩群晖，没有公网IP，可玩性就下降很多，虽然可以用QuickConnect，但是速度还是不太理想。其他的内网穿透啊，zerotier等等都有不方便之处。老刘也曾记下折腾这些东西的过程。有兴趣的可以参考。
今天老刘说的是DDNS，这个是需要公网IP的，而我们一说公网IP，其实都是说的IPV4的ip地址，这个目前全球都稀缺，移动是不用想了，联通和电信个别地方还能申请到。老刘一直用的是移动的宽带，以前用zerotier，后来就用qc来凑合着用。
这两天由于keepassxc的版本在uos非常的低，由于环境的原因也更新不到最新的版本，想在群晖上部署Bitwarden。所以，又动了ddns的心思，想到目前各大运营商IPV6已经普及了，而这个都是公网的IP，所以，理论上用ddns加IPV6是完全没有问题的。网上查了一下，也有很多的教程。正准备按教程操作的时候，发现根本就不必那么麻烦。
下面正文 进入群晖，打开控制面板，点击外部访问，点击DDNS。
选择使用SYNOLOGY的服务，主机名称填写一个你心意的名称，IPV4选择手动，如果你有公网的ip也可以选择自动。IPV6点击自动设置，最后点击确定。
用你申请的这个域名，浏览器打开试试吧。进入到熟悉的页面了吧！
一个坑 老刘由于一直没有找的心仪的路有，店里一直用一个廉价的小米4a千兆版的路由。设置完上面的一切后，本地打开域名是能正常访问的，但是用手机使用流量却访问不了这个域名，显示连接被拒绝。感觉应该是路由器的防火墙的问题。可是在小米路由器里找不到设置防火墙的地方。可能这个防火墙默认的是拒绝入站的访问吧
从家里拿来竞斗云的那个路由器，设置的一下防火墙，顺利搞定。</description>
    </item>
    
    <item>
      <title>更新群晖至DSM7.0</title>
      <link>https://iliu.org/3887.html</link>
      <pubDate>Mon, 06 Sep 2021 10:25:46 +0000</pubDate>
      
      <guid>https://iliu.org/3887.html</guid>
      <description>今天上午来到店内，不知道是怎么回事，产生了一些惰性，看到群里小胡同学发的白嫖亚马逊12本的电子书，就去搞了一下，看了会书，也不想更新商城的产品了，后来就想不行把群晖的系统升级一下吧。
群晖6.0的的系统不能自动升级到7.0，需要进行手动升级。于是到群晖官网下载相应型号的固件，在群晖的管理面板里手动升级即可。升级也很顺利。升级后有点小坑。
Dsm6.0系统里的很多套件不能用了 具体有哪些不是很清楚，我原来主要用的是moment这个相册的套件，还有synology drive,已经note station这三个套件。至于下载之类的，老刘也没有什么需要一天到晚下载的数据。升级完之后发现moment这个套件不能用了。
查找了一下发现，群晖dsm7.0的相册套件是synology photos。老刘手机上把Google市场卸载了，安装不上，后来找了一个可以下载Google市场APP的网站，下载了synology photos之后，传到手机上，算是顺利的解决了这一个问题。
升级后的感觉 感觉和以前的6.0相差不大，节目好看了那么一丢丢。如果非要比喻的话是xp到win7的感觉吧。更精致了一些。
不过升级后有些套件不支持了，看你的需求了。</description>
    </item>
    
    <item>
      <title>keepass配合群晖及keepasshttp实现密码快速登陆</title>
      <link>https://iliu.org/3413.html</link>
      <pubDate>Thu, 26 Nov 2020 09:10:34 +0000</pubDate>
      
      <guid>https://iliu.org/3413.html</guid>
      <description>前两天看老张老师到处寻找管理密码的软件，老刘由于一直在使用Norton的密码管理，所以没有在意，后来发现Norton的服务器链接较慢，使用起来还是有点不方便，恰好又看到老张在吐槽 某个软件（主要是老刘忘记名字了）使用的问题，于是老刘就想群晖上有没有一款密码管理的软件或者套件（自从老刘入白群晖后，找软件都先考虑这个），你还别说，真的搜出来了这样一个软件，不过不是安装在群晖上，而是把数据放在群晖上，其他的客户端都从群晖来读取数据，这个软件叫Keepass。
为什么选择Keepass？ 因为这是一款开源软件，任何人都能读它的源代码，支持所有的端，插件非常的丰富，只要你想到的功能，都有插件来实现。最重要的是免费，所以老刘毫不犹豫的上手了这个软件。
Keepass如何把数据存储在群晖上 其实这是利用了keepass的WebDav的功能，而这个功能恰好群晖又支持。
首先，下载安装keepass.官网的地址是：KeePass Password Safe；可以到官网下载最新的版本，如果喜欢绿色版的，这个软件也又提供。
第二，群晖里的一些设置
首先登陆群晖，在套件里安装webdav。
webdav的设置很简单，如下图，因为老刘没有公网IP，所以只能用http端口了，如果你可以用https，也可以开启5006端口
新建一个共享文件夹，专门放密码的，所以老刘就直接命名为mima了。
为了安全，再给这个文件夹专门建一个新用户，这个用户只能读写mima这个文件夹，用户组就是普通的USR
除了mima这个文件，其他的都设置成禁止访问
应用程序里。
至此，群晖里设置完毕
keepass设置 打开软件，点击新建数据库
如上图的位置，填入你的webdav的网址，这里有个小坑，如果保存不了，提示程序无法打开这个位置的话，需要到注册表里
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\WebClient\Parameters
把BasicAuthLevel 值改成2，即同时支持http和https，默认只支持https，然后重启服务
至于PC上如何操作，很多教程，而且是中文，不多说了。说说密码自动填写
下载插件keepasshttp， 很老的插件了，直接点击下面的链接下吧，官网很慢,解压缩后，把KeePassHttp.plgx文件放到keepass的插件目录里。设置一下，端口不用改，前三项打勾，高级设置中，前两项打勾。
http://gofile.me/5x2t4/39jIZSgbC
chrome浏览器进入商店搜索KeePassHttp-Connector 安装。点击连接，然后弹出的对话框里随便输几个数字。确定即可。</description>
    </item>
    
    <item>
      <title>纯代码设置frp服务器</title>
      <link>https://iliu.org/3340.html</link>
      <pubDate>Sun, 18 Oct 2020 07:27:04 +0000</pubDate>
      
      <guid>https://iliu.org/3340.html</guid>
      <description>以前老刘写过《宝塔面板安装FRP内网穿透控制群晖》的文章，最近发现不知道是这个插件的作者不再开发了还是其他的原因，xeath开发的这个frp服务器插件已经在商店里找不到了。其实，这也没什么，直接用代码的方式部署也是可以的。
SSH连接到VPS之后运行如下命令查看处理器架构，根据架构下载不同版本的frp
arch 查看结果，如果是“X86_64“即可选择”amd64”，
运行如下命令，根据架构不同，选择相应版本并进行下载，然后登陆frp的官网地址，现在最新的应该是0.34.1，所以，运行如下的命令：
wget https://github.com/fatedier/frp/releases/download/v0.34.1/frp_0.34.1_linux_amd64.tar.gz 然后解压，给文件换一个名字，进入frp目录
tar -zxvf frp_0.34.1_linux_amd64.tar.gz cp -r frp_0.34.1_linux_amd64 frp cd frp 修改frps.ini文件
vim frps.ini 格式如下：
[common] bind_port = 7000 dashboard_port = 7500 token = *******（根据情况自己设置） dashboard_user = 自己设置 dashboard_pwd = 自己设置 vhost_http_port = 10080 vhost_https_port = 10443 编辑完成后保存（vim保存如果不会请自行搜索）。
之后我们就可以运行frps的服务端了。
使用命令：
./frps -c frps.ini 如果输出如下文字，说明服务器配置成功
2019/01/12 15:22:39 [I] [service.go:130] frps tcp listen on 0.0.0.0:7000 2019/01/12 15:22:39 [I] [service.go:172] http service listen on 0.0.0.0:10080 2019/01/12 15:22:39 [I] [service.</description>
    </item>
    
  </channel>
</rss>
